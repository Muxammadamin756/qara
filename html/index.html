<!DOCTYPE html>
<html lang="uz">
<a href="./davlat.html"></a>
<a class="profilD" href="./profil.html">Profil</a>
<link rel="stylesheet" href="/stayle.css">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arab Tilini O‘rganish Dasturi</title>
    <link rel="stylesheet" href="stayle.css">
</head>

<body>
    <a class="diktant" href="/html/diktant.html">Diktant</a>
    <div id="welcome" class="welcome-screen">
        <h1>Arab Tilini O‘rganish Dasturi</h1>
        <h4>bunda siz arab tili so‘zlaringizni mustahkamlab olishingiz mumkin</h4>
        <button id="startBtn">Boshlash</button>
    </div>

    <div id="mainApp" style="display:none;">
        <div class="card">
            <div class="arabic" id="arabicWord"></div>
            <div>Tarjimasi: <span id="translation"></span></div>
            <button class="audio-btn" onclick="playAudio()">🔊 Tinglash</button>
        </div>

        <div class="quiz card">
            <div id="quizQuestion"></div>
            <div id="quizOptions"></div>
            <button onclick="checkAnswer()">Tekshirish</button>
            <div id="quizResult"></div>
            <div id="helpBox" style="display:none; margin-top:18px;">
                <div style="margin-bottom:10px;">Yordam olasizmi?</div>
                <button onclick="showHelp()" style="margin-right:10px;">Ha</button>
                <button onclick="hideHelp()">Yoq</button>
            </div>
        </div>
    </div>

    <script>
        const words = [
            { arabic: "كِتَابٌ", translation: "kitob", audio: "./OVoz/kitob.mp3", options: ["kitob", "olma", "uy"] },
            { arabic: "قَلَمٌ", translation: "Qalam", audio: "./OVoz/qolam.mp3", options: ["Qalam", "daraxt", "stol"] },
            { arabic: "مَاءٌ", translation: "suv", audio: "./OVoz/suv.mp3", options: ["suv", "non", "sut"] },
            { arabic: "بَيْتٌ", translation: "uy", audio: "./OVoz/uy.mp3", options: ["uy", "ko‘cha", "daraxt"] },
            { arabic: "وَلَدٌ", translation: "bola", audio: "audio/bola.mp3", options: ["bola", "qiz", "ota"] },
            { arabic: "بِنْتٌ", translation: "qiz", audio: "audio/qiz.mp3", options: ["qiz", "bola", "ota"] },
            { arabic: "مَدْرَسَةٌ", translation: "maktab", audio: "audio/maktab.mp3", options: ["maktab", "bola", "nam"] },
            { arabic: "كَأْسٌ", translation: "stakan", audio: "audio/bola.mp3", options: ["erkak", "qiz", "stakan"] },
            { arabic: "خُبْزٌ", translation: "non", audio: "audio/bola.mp3", options: ["xamr", "non", "eski"] },
            { arabic: "سَمَاءٌ", translation: "osmon", audio: "audio/bola.mp3", options: ["shakar", "osmon", "kocha"] },
            { arabic: "سَيَّارَةٌ", translation: "mashina", audio: "audio/bola.mp3", options: ["uy", "qiz", "mashina"] },
            { arabic: "قَمَرٌ", translation: "oy (osmondagi)", audio: "audio/bola.mp3", options: ["oy", "pul", "oy (osmondagi)"] },
            { arabic: "قِطٌّ", translation: "mushuk", audio: "audio/bola.mp3", options: ["it", "mol", "mushuk"] },
            { arabic: "مِظَلَّةٌ", translation: "soyobon", audio: "audio/bola.mp3", options: ["uy", "soyobon", "it"] },
            { arabic: "جَوَّالٌ", translation: "telefon", audio: "audio/bola.mp3", options: ["bola", "qiz", "telefon"] },
            // ... boshqa so‘zlarni ham shu tartibda qo‘shing ...
        ];

        let shuffledWords = [];
        let current = 0;

        // Variantlarni har safar aralashtirish uchun
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Test boshlanganda va barcha savollar tugaganda chaqiriladi
        function reshuffleWords() {
            shuffledWords = shuffle([...words]);
            current = 0;
        }

        function loadWord(anim = true) {
            if (current >= shuffledWords.length) {
                reshuffleWords();
            }
            const w = shuffledWords[current];
            const arabicEl = document.getElementById('arabicWord');
            const translationEl = document.getElementById('translation');
            const quizQ = document.getElementById('quizQuestion');
            const quizOpts = document.getElementById('quizOptions');
            const quizRes = document.getElementById('quizResult');
            const helpBox = document.getElementById('helpBox');

            arabicEl.textContent = w.arabic;
            translationEl.textContent = "???"; // Tarjima yashirin
            quizQ.textContent = `"${w.arabic}" so‘zining tarjimasini tanlang:`;

            // Variantlarni har safar aralashtirish
            const shuffledOptions = shuffle([...w.options]);
            let opts = '';
            shuffledOptions.forEach(opt => {
                opts += `<label><input type="radio" name="quiz" value="${opt}">${opt}</label> `;
            });
            quizOpts.innerHTML = opts;
            quizRes.textContent = '';
            helpBox.style.display = "none";
            translationEl.style.color = "#222";

            // Animatsiya
            if (anim) {
                arabicEl.classList.remove('fade-in');
                quizRes.classList.remove('fade-in');
                setTimeout(() => {
                    arabicEl.classList.add('fade-in');
                }, 10);
            }
        }

        function showHelp() {
            const translationEl = document.getElementById('translation');
            const w = shuffledWords[current];
            translationEl.textContent = w.translation;
            translationEl.style.color = "#2563eb";
            document.getElementById('helpBox').style.display = "none";
        }

        function hideHelp() {
            document.getElementById('helpBox').style.display = "none";
        }

        function playAudio() {
            const w = shuffledWords[current];
            if (w.audio) {
                const audio = new Audio(w.audio);
                audio.play();
            } else {
                alert("Audio fayl topilmadi.");
            }
        }

        function checkAnswer() {
            const radios = document.getElementsByName('quiz');
            let selected = '';
            for (const r of radios) if (r.checked) selected = r.value;
            const result = document.getElementById('quizResult');
            const mainApp = document.getElementById('mainApp');
            const w = shuffledWords[current];

            if (selected === w.translation) {
                result.textContent = 'To‘g‘ri!';
                result.style.color = 'green';
                result.classList.remove('fade-in');
                setTimeout(() => {
                    result.classList.add('fade-in');
                }, 10);

                setTimeout(() => {
                    mainApp.classList.add('fade-out');
                    setTimeout(() => {
                        mainApp.classList.remove('fade-out');
                        nextWord();
                    }, 400);
                }, 700);
            } else {
                result.textContent = 'Noto‘g‘ri, yana urinib ko‘ring.';
                result.style.color = 'red';
                result.classList.remove('fade-in');
                setTimeout(() => {
                    result.classList.add('fade-in');
                }, 10);
                // Yordam oynasini ko‘rsatish
                document.getElementById('helpBox').style.display = "block";
            }
        }

        function nextWord() {
            current++;
            loadWord();
        }

        window.onload = function () {
            document.getElementById('startBtn').onclick = function () {
                document.getElementById('welcome').style.display = "none";
                document.getElementById('mainApp').style.display = "flex";
                reshuffleWords();
                loadWord();
            };
        };
    </script>
</body>

</html>
````