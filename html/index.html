<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arab Tilini O‘rganish Dasturi</title>
    <link rel="stylesheet" href="stayle.css">
    <style>
        body {
            background: linear-gradient(120deg, #e0e7ff 0%, #f9fafb 100%);
            font-family: Arial, sans-serif;
            min-height: 100vh;
        }
        nav {
            margin-bottom: 18px;
            text-align: center;
            animation: fadeInNav 1s;
        }
        nav a {
            color: #2563eb;
            text-decoration: none;
            font-weight: bold;
            margin: 0 10px;
            font-size: 1.1em;
            transition: color 0.2s;
        }
        nav a:hover {
            color: #1e40af;
            text-decoration: underline;
        }
        #alertBox {
            display: none;
            background: #fee2e2;
            color: #b91c1c;
            text-align: center;
            padding: 10px 0;
            font-weight: bold;
            border-radius: 8px;
            margin: 10px 0 18px 0;
            animation: fadeInAlert 0.5s;
        }
        @keyframes fadeInAlert {
            from { opacity: 0; transform: translateY(-20px);}
            to { opacity: 1; transform: translateY(0);}
        }
        .welcome-screen {
            text-align: center;
            margin-top: 40px;
            animation: fadeInMain 1.2s;
        }
        .welcome-screen h1 {
            font-size: 2.2em;
            color: #2563eb;
            margin-bottom: 10px;
            letter-spacing: 1px;
            animation: popIn 1.2s;
        }
        .welcome-screen h4 {
            color: #334155;
            margin-bottom: 24px;
            animation: fadeInMain 1.5s;
        }
        #startBtn {
            padding: 12px 36px;
            font-size: 1.2em;
            border-radius: 10px;
            border: none;
            background: #2563eb;
            color: #fff;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 2px 8px #c7d2fe;
            transition: background 0.2s, transform 0.2s;
            animation: popIn 1.4s;
        }
        #startBtn:hover {
            background: #1e40af;
            transform: scale(1.04);
        }
        @keyframes fadeInNav {
            from { opacity: 0; transform: translateY(-20px);}
            to { opacity: 1; transform: translateY(0);}
        }
        @keyframes fadeInMain {
            from { opacity: 0; transform: translateY(40px);}
            to { opacity: 1; transform: translateY(0);}
        }
        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.7);}
            70% { opacity: 1; transform: scale(1.08);}
            100% { opacity: 1; transform: scale(1);}
        }
        .card, .quiz.card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 24px #e0eafc;
            padding: 28px 24px 20px 24px;
            margin: 0 auto 18px auto;
            max-width: 420px;
            animation: fadeInMain 1.2s;
        }
        .arabic {
            font-size: 2em;
            color: #2563eb;
            margin-bottom: 12px;
            direction: rtl;
            animation: popIn 1.2s;
        }
        .audio-btn {
            background: #f0f4fa;
            color: #2563eb;
            border: none;
            border-radius: 8px;
            padding: 8px 18px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.2s;
        }
        .audio-btn:hover {
            background: #dbeafe;
        }
        .quiz label {
            margin-right: 18px;
            font-size: 1.1em;
            cursor: pointer;
        }
        .quiz input[type="radio"] {
            margin-right: 6px;
        }
        .check-btn, .quiz button {
            margin-top: 18px;
            padding: 10px 32px;
            font-size: 1.1em;
            border-radius: 8px;
            border: none;
            background: #2563eb;
            color: #fff;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        .check-btn:hover, .quiz button:hover {
            background: #1e40af;
            transform: translateY(-2px) scale(1.04);
        }
        #quizResult {
            margin-top: 18px;
            font-size: 1.2em;
            min-height: 32px;
            transition: color 0.3s;
        }
        .fade-in {
            animation: fadeInMain 0.6s;
        }
        .fade-out {
            animation: fadeOutMain 0.4s forwards;
        }
        @keyframes fadeOutMain {
            to { opacity: 0; transform: translateY(40px);}
        }
        @media (max-width: 600px) {
            .card, .quiz.card, #mainApp {
                max-width: 98vw !important;
                padding: 10px !important;
                font-size: 1em !important;
            }
            .arabic {
                font-size: 1.3em !important;
            }
            .audio-btn, .check-btn, button {
                font-size: 1em !important;
                padding: 8px 16px !important;
            }
            .welcome-screen h1 {
                font-size: 1.3em !important;
            }
            .quiz label {
                display: block;
                margin-bottom: 8px;
            }
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">Bosh sahifa</a> |
        <a href="profil.html">Profil</a> |
        <a href="diktant.html" id="diktantLink">Diktant</a> |
        <a href="foydali_soz.html">Foydali so‘zlar</a>
    </nav>
    <div id="alertBox">
        Bu hozir qayta ishlanmoqda
    </div>

    <div id="welcome" class="welcome-screen">
        <h1>Arab Tilini O‘rganish Dasturi</h1>
        <h4>bunda siz arab tili so‘zlaringizni mustahkamlab olishingiz mumkin</h4>
        <button id="startBtn">Boshlash</button>
    </div>

    <div id="mainApp" style="display:none;">
        <div class="card">
            <div class="arabic" id="arabicWord"></div>
            <div>Tarjimasi: <span id="translation"></span></div>
            <button class="audio-btn" onclick="playAudio()">🔊 Tinglash</button>
        </div>

        <div class="quiz card">
            <div id="quizQuestion"></div>
            <div id="quizOptions"></div>
            <button onclick="checkAnswer()">Tekshirish</button>
            <div id="quizResult"></div>
            <div id="helpBox" style="display:none; margin-top:18px;">
                <div style="margin-bottom:10px;">Yordam olasizmi?</div>
                <button onclick="showHelp()" style="margin-right:10px;">Ha</button>
                <button onclick="hideHelp()">Yoq</button>
            </div>
        </div>
    </div>

    <script>

        const words = [
            { arabic: "كِتَابٌ", translation: "kitob", audio: "./OVoz/kitob.mp3", options: ["kitob", "olma", "uy"] },
            { arabic: "قَلَمٌ", translation: "Qalam", audio: "./OVoz/qolam.mp3", options: ["Qalam", "daraxt", "stol"] },
            { arabic: "مَاءٌ", translation: "suv", audio: "./OVoz/suv.mp3", options: ["suv", "non", "sut"] },
            { arabic: "بَيْتٌ", translation: "uy", audio: "./OVoz/uy.mp3", options: ["uy", "ko‘cha", "daraxt"] },
            { arabic: "وَلَدٌ", translation: "bola", audio: "audio/bola.mp3", options: ["bola", "qiz", "ota"] },
            { arabic: "بِنْتٌ", translation: "qiz", audio: "audio/qiz.mp3", options: ["qiz", "bola", "ota"] },
            { arabic: "مَدْرَسَةٌ", translation: "maktab", audio: "audio/maktab.mp3", options: ["maktab", "bola", "nam"] },
            { arabic: "كَأْسٌ", translation: "stakan", audio: "audio/bola.mp3", options: ["erkak", "qiz", "stakan"] },
            { arabic: "خُبْزٌ", translation: "non", audio: "audio/bola.mp3", options: ["xamr", "non", "eski"] },
            { arabic: "سَمَاءٌ", translation: "osmon", audio: "audio/bola.mp3", options: ["shakar", "osmon", "kocha"] },
            { arabic: "سَيَّارَةٌ", translation: "mashina", audio: "audio/bola.mp3", options: ["uy", "qiz", "mashina"] },
            { arabic: "قَمَرٌ", translation: "oy (osmondagi)", audio: "audio/bola.mp3", options: ["oy", "pul", "oy (osmondagi)"] },
            { arabic: "قِطٌّ", translation: "mushuk", audio: "audio/bola.mp3", options: ["it", "mol", "mushuk"] },
            { arabic: "مِظَلَّةٌ", translation: "soyobon", audio: "audio/bola.mp3", options: ["uy", "soyobon", "it"] },
            { arabic: "جَوَّالٌ", translation: "telefon", audio: "audio/bola.mp3", options: ["bola", "qiz", "telefon"] },
            // ... boshqa so‘zlarni ham shu tartibda qo‘shing ...
        ];

        let shuffledWords = [];
        let current = 0;

        // Variantlarni har safar aralashtirish uchun
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Test boshlanganda va barcha savollar tugaganda chaqiriladi
        function reshuffleWords() {
            shuffledWords = shuffle([...words]);
            current = 0;
        }

        function loadWord(anim = true) {
            if (current >= shuffledWords.length) {
                reshuffleWords();
            }
            const w = shuffledWords[current];
            const arabicEl = document.getElementById('arabicWord');
            const translationEl = document.getElementById('translation');
            const quizQ = document.getElementById('quizQuestion');
            const quizOpts = document.getElementById('quizOptions');
            const quizRes = document.getElementById('quizResult');
            const helpBox = document.getElementById('helpBox');

            arabicEl.textContent = w.arabic;
            translationEl.textContent = "???"; // Tarjima yashirin
            quizQ.textContent = `"${w.arabic}" so‘zining tarjimasini tanlang:`;

            // Variantlarni har safar aralashtirish
            const shuffledOptions = shuffle([...w.options]);
            let opts = '';
            shuffledOptions.forEach(opt => {
                opts += `<label><input type="radio" name="quiz" value="${opt}">${opt}</label> `;
            });
            quizOpts.innerHTML = opts;
            quizRes.textContent = '';
            helpBox.style.display = "none";
            translationEl.style.color = "#222";

            // Animatsiya
            if (anim) {
                arabicEl.classList.remove('fade-in');
                quizRes.classList.remove('fade-in');
                setTimeout(() => {
                    arabicEl.classList.add('fade-in');
                }, 10);
            }
        }

        function showHelp() {
            const translationEl = document.getElementById('translation');
            const w = shuffledWords[current];
            translationEl.textContent = w.translation;
            translationEl.style.color = "#2563eb";
            document.getElementById('helpBox').style.display = "none";
        }

        function hideHelp() {
            document.getElementById('helpBox').style.display = "none";
        }

        function playAudio() {
            const w = shuffledWords[current];
            if (w.audio) {
                const audio = new Audio(w.audio);
                audio.play();
            } else {
                alert("Audio fayl topilmadi.");
            }
        }

        function checkAnswer() {
            const radios = document.getElementsByName('quiz');
            let selected = '';
            for (const r of radios) if (r.checked) selected = r.value;
            const result = document.getElementById('quizResult');
            const mainApp = document.getElementById('mainApp');
            const w = shuffledWords[current];

            if (selected === w.translation) {
                result.textContent = 'To‘g‘ri!';
                result.style.color = 'green';
                result.classList.remove('fade-in');
                setTimeout(() => {
                    result.classList.add('fade-in');
                }, 10);

                setTimeout(() => {
                    mainApp.classList.add('fade-out');
                    setTimeout(() => {
                        mainApp.classList.remove('fade-out');
                        nextWord();
                    }, 400);
                }, 700);
            } else {
                result.textContent = 'Noto‘g‘ri, yana urinib ko‘ring.';
                result.style.color = 'red';
                result.classList.remove('fade-in');
                setTimeout(() => {
                    result.classList.add('fade-in');
                }, 10);
                // Yordam oynasini ko‘rsatish
                document.getElementById('helpBox').style.display = "block";
                // Xato bo‘lsa ovoz chiqarish
                const audio = new Audio('audio/error.mp3');
                audio.play();
            }
        }

        function nextWord() {
            current++;
            loadWord();
        }

        window.onload = function () {
            document.getElementById('startBtn').onclick = function () {
                document.getElementById('welcome').style.display = "none";
                document.getElementById('mainApp').style.display = "flex";
                reshuffleWords();
                loadWord();
            };

            // Diktant linki bosilganda ogohlantirish chiqadi
            document.getElementById('diktantLink').onclick = function(e) {
                e.preventDefault();
                document.getElementById('alertBox').style.display = "block";
                setTimeout(() => {
                    document.getElementById('alertBox').style.display = "none";
                }, 2500);
            };
        };
    </script>
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=1xUOhjqj"></script>
</body>

</html>